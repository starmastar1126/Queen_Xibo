{#
/*
 * Spring Signage Ltd - http://www.springsignage.com
 * Copyright (C) 2015 Spring Signage Ltd
 * (${FILE_NAME})
 */
$tabs[] = Form::AddTab('general', __('General'));
        $tabs[] = Form::AddTab('location', __('Location'));
        $tabs[] = Form::AddTab('maintenance', __('Maintenance'));
        $tabs[] = Form::AddTab('wol', __('Wake on LAN'));
        $tabs[] = Form::AddTab('advanced', __('Advanced'));

// Column 1
        $formFields = array();
        $formFields[] = Form::AddText('display', __('Display'), $displayObject->display,
            __('The Name of the Display - (1 - 50 characters).'), 'd', 'required');

        $formFields[] = Form::AddText('hardwareKey', __('Display\'s Hardware Key'), $displayObject->license,
            __('A unique identifier for this display.'), 'h', 'required', NULL, false);

        $formFields[] = Form::AddText('description', __('Description'), $displayObject->description,
            __('A description - (1 - 254 characters).'), 'p', 'maxlength="50"');

        $formFields[] = Form::AddCombo(
            'licensed',
            __('Licence Display?'),
            $displayObject->licensed,
            array(array('licensedid' => '1', 'licensed' => 'Yes'), array('licensedid' => '0', 'licensed' => 'No')),
            'licensedid',
            'licensed',
            __('Use one of the available licenses for this display?'),
            'l');

        $formFields[] = Form::AddCombo(
            'defaultlayoutid',
            __('Default Layout'),
            $displayObject->defaultLayoutId,
            $this->getUser()->LayoutList(),
            'layoutid',
            'layout',
            __('The Default Layout to Display where there is no other content.'),
            't');

        Theme::Set('form_fields_general', $formFields);

        // Maintenance
        $formFields = array();
        $formFields[] = Form::AddCombo(
            'email_alert',
            __('Email Alerts'),
            $displayObject->emailAlert,
            array(array('id' => '1', 'value' => 'Yes'), array('id' => '0', 'value' => 'No')),
            'id',
            'value',
            __('Do you want to be notified by email if there is a problem with this display?'),
            'a');

        $formFields[] = Form::AddCheckbox('alert_timeout', __('Use the Global Timeout?'), $displayObject->alertTimeout,
            __('Should this display be tested against the global time out or the client collection interval?'),
            'o');

        Theme::Set('form_fields_maintenance', $formFields);

        // Location
        $formFields = array();

        $formFields[] = Form::AddNumber('latitude', __('Latitude'), $displayObject->latitude,
            __('The Latitude of this display'), 'g');

        $formFields[] = Form::AddNumber('longitude', __('Longitude'), $displayObject->longitude,
            __('The Longitude of this Display'), 'g');

        Theme::Set('form_fields_location', $formFields);

        // Wake on LAN
        $formFields = array();

        $formFields[] = Form::AddCheckbox('wakeOnLanEnabled', __('Enable Wake on LAN'),
            $displayObject->wakeOnLanEnabled, __('Wake on Lan requires the correct network configuration to route the magic packet to the display PC'),
            'w');

        $formFields[] = Form::AddText('broadCastAddress', __('BroadCast Address'), (($displayObject->broadCastAddress == '') ? $displayObject->clientAddress : $displayObject->broadCastAddress),
            __('The IP address of the remote host\'s broadcast address (or gateway)'), 'b');

        $formFields[] = Form::AddText('secureOn', __('Wake on LAN SecureOn'), $displayObject->secureOn,
            __('Enter a hexadecimal password of a SecureOn enabled Network Interface Card (NIC) of the remote host. Enter a value in this pattern: \'xx-xx-xx-xx-xx-xx\'. Leave the following field empty, if SecureOn is not used (for example, because the NIC of the remote host does not support SecureOn).'), 's');

        $formFields[] = Form::AddText('wakeOnLanTime', __('Wake on LAN Time'), $displayObject->wakeOnLanTime,
            __('The time this display should receive the WOL command, using the 24hr clock - e.g. 19:00. Maintenance must be enabled.'), 't');

        $formFields[] = Form::AddText('cidr', __('Wake on LAN CIDR'), $displayObject->cidr,
            __('Enter a number within the range of 0 to 32 in the following field. Leave the following field empty, if no subnet mask should be used (CIDR = 0). If the remote host\'s broadcast address is unknown: Enter the host name or IP address of the remote host in Broad Cast Address and enter the CIDR subnet mask of the remote host in this field.'), 'c');

        Theme::Set('form_fields_wol', $formFields);

        // Advanced
        $formFields = array();

        $displayProfileList = $this->getUser()->DisplayProfileList(NULL, array('type' => $displayObject->clientType));
        array_unshift($displayProfileList, array('displayprofileid' => 0, 'name' => ''));

        $formFields[] = Form::AddCombo(
            'displayprofileid',
            __('Settings Profile?'),
            $displayObject->displayProfileId,
            $displayProfileList,
            'displayprofileid',
            'name',
            __('What display profile should this display use?'),
            'p');

        $formFields[] = Form::AddCombo(
            'inc_schedule',
            __('Interleave Default'),
            $displayObject->incSchedule,
            array(array('id' => '1', 'value' => 'Yes'), array('id' => '0', 'value' => 'No')),
            'id',
            'value',
            __('Whether to always put the default layout into the cycle.'),
            'i');

        $formFields[] = Form::AddCombo(
            'auditing',
            __('Auditing'),
            $displayObject->isAuditing,
            array(array('id' => '1', 'value' => 'Yes'), array('id' => '0', 'value' => 'No')),
            'id',
            'value',
            __('Collect auditing from this client. Should only be used if there is a problem with the display.'),
            'a');

        // Show the resolved settings for this display.
        $formFields[] = Form::AddMessage(__('The settings for this display are shown below. They are taken from the active Display Profile for this Display, which can be changed in Display Settings. If you have altered the Settings Profile above, you will need to save and re-show the form.'));

// Also show a settings table, with name, value
#}

{% extends "form-base.twig" %}
{% import "forms.twig" as forms %}

{% block formTitle %}
    {% trans "Edit Display" %}
{% endblock %}

{% block formButtons %}
    {% trans "Help" %}, XiboHelpRender("{{ help }}")
    {% trans "Cancel" %}, XiboDialogClose()
    {% trans "Save" %}, $("#displayEditForm").submit()
{% endblock %}

{% block formHtml %}
    <div class="row">
        <div class="col-md-12">
            <ul class="nav nav-tabs" role="tablist">
                <li class="active"><a href="#general" role="tab" data-toggle="tab"><span>{% trans "General" %}</span></a></li>
                <li><a href="#location" role="tab" data-toggle="tab"><span>{% trans "Location" %}</span></a></li>
                <li><a href="#maintenance" role="tab" data-toggle="tab"><span>{% trans "Maintenance" %}</span></a></li>
                <li><a href="#wol" role="tab" data-toggle="tab"><span>{% trans "Wake on LAN" %}</span></a></li>
                <li><a href="#advanced" role="tab" data-toggle="tab"><span>{% trans "Advanced" %}</span></a></li>
            </ul>
            <form id="displayEditForm" class="XiboForm form-horizontal" method="put" action="{{ urlFor("display.edit") }}">
                <div class="tab-content">
                    <div class="tab-pane active" id="general">
                        {% set title %}{% trans "Display" %}{% endset %}
                        {% set helpText %}{% trans "The Name of the Display - (1 - 50 characters)." %}{% endset %}
                        {{ forms.text("display", title, display.display, helpText,"","required") }}
                
                        {% set title %}{% trans "Display's Hardware Key" %}{% endset %}
                        {% set helpText %}{% trans "A unique identifier for this display." %}{% endset %}
                        {{ forms.text("hardwareKey", title, display.license, helpText,"","required","", false) }}

                        {% set title %}{% trans "Description" %}{% endset %}
                        {% set helpText %}{% trans "A description - (1 - 254 characters)." %}{% endset %}
                        {{ forms.text("description", title, diplay.description, helpText) }}

                        {% set title %}{% trans "Licence display?" %}{% endset %}
                        {% set helpText %}{% trans "Use one of the available licenses for this display?" %}{% endset %}
                        {% set yes %}{% trans "Yes" %}{% endset %}
                        {% set no %}{% trans "No" %}{% endset %}
                        {% set options = [
                        { licensedid: 1, licensed: yes },
                        { licensedid: 0, licensed: no }
                        ] %}
                        {{ forms.dropdown("licensed", "single", title, "", options, "licensedid", "licensed", helpText) }}

                        {# is default layout - not working at the moment #}
                        {% set title %}{% trans "Default Layout" %}{% endset %}
                        {% set helpText %}{% trans "The Default Layout to Display where there is no other content." %}{% endset %}
                        {{ forms.dropdown("defaultLayoutId", "single", title, "", user.layoutList, "layoutid", "layout", helpText) }}
                    </div>
                    <div class="tab-pane" id="location">
                        {{ forms.number("latitude", "Latitude", display.latitude, "The Latitude of this display") }}
                        {{ forms.number("longitude", "Longitude", display.longitude, "The Longitude of this Display") }}
                    </div>
                    <div class="tab-pane" id="maintenance">
                        {% set title %}{% trans "Email Alerts" %}{% endset %}
                        {% set helpText %}{% trans "Do you want to be notified by email if there is a problem with this display?" %}{% endset %}
                        {% set yes %}{% trans "Yes" %}{% endset %}
                        {% set no %}{% trans "No" %}{% endset %}
                        {% set email_alert = [
                        { id: 0, value: no },
                        { id: 1, value: yes }
                        ] %}
                        {{ forms.dropdown("emailAlert", "single", title, "", email_alert, "id", "value", helpText) }}


                        {% set title %}{% trans "Use the Global Timeout?" %}{% endset %}
                        {% set helpText %}{% trans "Should this display be tested against the global time out or the client collection interval?" %}{% endset %}
                        {{ forms.checkbox("alertTimeout", title, display.alertTimeout, helpText) }}
                    </div>
                    <div class="tab-pane" id="wol">
                        {% set title %}{% trans "Enable Wake on LAN" %}{% endset %}
                        {% set helpText %}{% trans "Wake on Lan requires the correct network configuration to route the magic packet to the display PC" %}{% endset %}
                        {{ forms.checkbox("wakeOnLanEnabled", title, display.wakeOnLanEnabled, helpText) }}

                        {% set title %}{% trans "BroadCast Address" %}{% endset %}
                        {% set helpText %}{% trans "The IP address of the remote host\'s broadcast address (or gateway)" %}{% endset %}
                        {{ forms.text("broadCastAddress", title, display.broadCastAddress, helpText) }}

                        {% set title %}{% trans "Wake on LAN SecureOn" %}{% endset %}
                        {% set helpText %}{% trans "Enter a hexadecimal password of a SecureOn enabled Network Interface Card (NIC) of the remote host. Enter a value in this pattern: \'xx-xx-xx-xx-xx-xx\'. Leave the following field empty, if SecureOn is not used (for example, because the NIC of the remote host does not support SecureOn)." %}{% endset %}
                        {{ forms.text("secureOn", title, display.secureOn, helpText) }}

                        {% set title %}{% trans "Wake on LAN Time" %}{% endset %}
                        {% set helpText %}{% trans "The time this display should receive the WOL command, using the 24hr clock - e.g. 19:00. Maintenance must be enabled." %}{% endset %}
                        {{ forms.text("wakeOnLanTime", title, display.wakeOnLanTime, helpText) }}


                        {% set title %}{% trans "Wake on LAN CIDR" %}{% endset %}
                        {% set helpText %}{% trans "Enter a number within the range of 0 to 32 in the following field. Leave the following field empty, if no subnet mask should be used (CIDR = 0). If the remote host\'s broadcast address is unknown: Enter the host name or IP address of the remote host in Broad Cast Address and enter the CIDR subnet mask of the remote host in this field." %}{% endset %}
                        {{ forms.text("cidr", title, display.cidr, helpText) }}
                    </div>
                    <div class="tab-pane" id="advanced">
                        {#d isplay profile thing - not sure + it's kind of not working in displayProfileAdd #}

                        {% set title %}{% trans "Interleave Default" %}{% endset %}
                        {% set helpText %}{% trans "Whether to always put the default layout into the cycle." %}{% endset %}
                        {% set yes %}{% trans "Yes" %}{% endset %}
                        {% set no %}{% trans "No" %}{% endset %}
                        {% set inc_schedule = [
                        { id: 0, value: no },
                        { id: 1, value: yes }
                        ] %}
                        {{ forms.dropdown("incSchedule", "single", title, "", display.inc_schedule, "id", "value", helpText) }}

                        {% set title %}{% trans "Auditing" %}{% endset %}
                        {% set helpText %}{% trans "Collect auditing from this client. Should only be used if there is a problem with the display." %}{% endset %}
                        {% set yes %}{% trans "Yes" %}{% endset %}
                        {% set no %}{% trans "No" %}{% endset %}
                        {% set auditing = [
                        { id: 0, value: no },
                        { id: 1, value: yes }
                        ] %}
                        {{ forms.dropdown("isAuditing", "single", title, "", display.auditing, "id", "value", helpText) }}

                        {{forms.message("The settings for this display are shown below. They are taken from the active Display Profile for this Display, which can be changed in Display Settings. If you have altered the Settings Profile above, you will need to save and re-show the form.") }}

                        {#actually show those things #}
                    </div>

                </div>    
            </form>
        </div>
    </div>
{% endblock %}